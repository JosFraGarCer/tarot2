# üó∫Ô∏è Roadmap de Desarrollo - Tarot2

## 1. Visi√≥n del Roadmap

Este roadmap define el plan de trabajo para consolidar Tarot2, eliminar deuda t√©cnica y preparar nuevas funcionalidades. Se organiza en fases incrementales con objetivos claros.

---

## 2. Fases del Roadmap

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           ROADMAP TAROT2                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   FASE 0          FASE 1           FASE 2           FASE 3                  ‚îÇ
‚îÇ   Cimientos       Convergencia     Observabilidad   Expansi√≥n               ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÇ
‚îÇ   ‚Ä¢ Seguridad     ‚Ä¢ Tablas         ‚Ä¢ M√©tricas       ‚Ä¢ Effects 2.0           ‚îÇ
‚îÇ   ‚Ä¢ Rate limit    ‚Ä¢ Formularios    ‚Ä¢ requestId      ‚Ä¢ Dashboard i18n        ‚îÇ
‚îÇ   ‚Ä¢ Logout        ‚Ä¢ Previews       ‚Ä¢ Alertas        ‚Ä¢ Storybook             ‚îÇ
‚îÇ                   ‚Ä¢ Accesibilidad                                           ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ   [COMPLETADO]    [EN PROGRESO]    [PLANIFICADO]    [FUTURO]               ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ   2 semanas       4 semanas        3 semanas        6+ semanas              ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3. Fase 0: Cimientos (COMPLETADO ‚úÖ)

**Objetivo:** Securizar la base y completar infraestructura cr√≠tica.

### Tareas Completadas

| Tarea | Impacto | Estado |
|-------|---------|--------|
| Rate limiting en login/logout | üî• Alta | ‚úÖ |
| Limpieza cookie en logout | üî• Alta | ‚úÖ |
| Rate limiting en publish/revert | üî• Alta | ‚úÖ |
| Documentaci√≥n de seguridad | Media | ‚úÖ |

### Entregables

- ‚úÖ Middleware `02.rate-limit.ts` configurado
- ‚úÖ Logout limpia cookie correctamente
- ‚úÖ Logs de rate limit implementados
- ‚úÖ Documentaci√≥n SECURITY.md actualizada

---

## 4. Fase 1: Convergencia UI (EN PROGRESO üîÑ)

**Objetivo:** Unificar UI Admin y eliminar componentes legacy.

### 4.1 Fase 1A: Convergencia Core

| Tarea | Impacto | Esfuerzo | Estado |
|-------|---------|----------|--------|
| Migrar VersionList ‚Üí AdminTableBridge | Alta | Medio | üîÑ Pendiente |
| Migrar RevisionsTable ‚Üí AdminTableBridge | Alta | Medio | üîÑ Pendiente |
| Eliminar PreviewModal ‚Üí EntityInspectorDrawer | Alta | Bajo | üîÑ Pendiente |
| Normalizar USelectMenu a v-model | Media | Bajo | üîÑ Pendiente |

### 4.2 Fase 1B: Convergencia Completa

| Tarea | Impacto | Esfuerzo | Estado |
|-------|---------|----------|--------|
| Migrar UserTable ‚Üí AdminTableBridge | Media | Medio | üìã Planificado |
| Migrar RoleForm ‚Üí FormModal + presets | Media | Medio | üìã Planificado |
| ~~Crear BulkActionsBar compartida~~ | - | - | ‚úÖ **Ya existe** |
| ~~Implementar useTableSelection~~ | - | - | ‚úÖ **Ya existe** |
| Expandir StatusBadge a Admin | Baja | Bajo | üìã Planificado |

> **Nota (actualizaci√≥n post-auditor√≠a):** `useTableSelection` y `BulkActionsBar` ya est√°n implementados en el c√≥digo actual. Ver [Anexo: Auditor√≠a de C√≥digo](./13-ANEXO-AUDITORIA-CODIGO.md).

### Entregables Esperados

- [ ] Todas las tablas Admin usando bridges
- [ ] PreviewModal eliminado
- [x] ~~useTableSelection implementado~~ (ya existe)
- [x] ~~BulkActionsBar en producci√≥n~~ (ya existe)
- [ ] 0 componentes legacy

### Criterios de Aceptaci√≥n

1. Todas las tablas renderizan con CommonDataTable
2. Previews usan EntityInspectorDrawer
3. Bulk actions funcionan uniformemente
4. No hay warnings de USelectMenu
5. Tests manuales pasan (CRUD, bulk, preview, filtros)

---

## 5. Fase 2: Observabilidad (PLANIFICADO üìã)

**Objetivo:** Instrumentar m√©tricas y logging para visibilidad operativa.

### Tareas

| Tarea | Impacto | Esfuerzo | Dependencias |
|-------|---------|----------|--------------|
| Implementar useRequestMetrics | Media | Medio | Ninguna |
| A√±adir requestId correlacionado | Media | Medio | Ninguna |
| M√©tricas editoriales (publish/revert) | Media | Medio | Ninguna |
| Optimizar preview SSR con lazy-load | Media | Medio | Ninguna |
| Medir ratio 304/200 | Baja | Bajo | Ninguna |
| Dashboard de m√©tricas | Baja | Alto | M√©tricas implementadas |

### Entregables Esperados

- [ ] requestId en todos los logs
- [ ] M√©tricas de publish/revert expuestas
- [ ] useRequestMetrics disponible
- [ ] Documentaci√≥n de m√©tricas

### Criterios de Aceptaci√≥n

1. requestId propagado en respuestas API
2. M√©tricas disponibles en formato Prometheus/OTLP
3. Logs correlacionables front‚Üîback
4. Ratio 304/200 medible

---

## 6. Fase 3: Expansi√≥n Narrativa (FUTURO üîÆ)

**Objetivo:** Nuevos sistemas de contenido y herramientas.

### Tareas

| Tarea | Impacto | Esfuerzo | Dependencias |
|-------|---------|----------|--------------|
| Effect System 2.0 (editor guiado) | Alta | Alto | Fase 1 completada |
| Metadata extendida para mundos/mazos | Media | Medio | Dise√±o aprobado |
| Dashboard i18n | Media | Medio | API de cobertura |
| Storybook/MDX componentes | Baja | Alto | Tiempo disponible |
| Generador CLI de entidades | Baja | Medio | Plantillas definidas |

### Entregables Esperados

- [ ] Editor visual de efectos funcional
- [ ] Dashboard de cobertura i18n
- [ ] Documentaci√≥n Storybook b√°sica

---

## 7. Backlog General

### UI / Componentes

| Tarea | Prioridad | Esfuerzo |
|-------|-----------|----------|
| Skeletons reutilizables | Media | Bajo |
| Toolbar declarativa por entidad | Media | Medio |
| Chips y badges unificados en Admin | Baja | Bajo |
| Tema oscuro | Baja | Medio |

### Backend

| Tarea | Prioridad | Esfuerzo |
|-------|-----------|----------|
| Helper SQL tags AND/ANY | Alta | Medio |
| L√≠mites en import/export | Media | Bajo |
| Mejorar logging publish/revert | Media | Bajo |
| Rate limit distribuido (Redis) | Baja | Alto |

### i18n

| Tarea | Prioridad | Esfuerzo |
|-------|-----------|----------|
| Radar de cobertura | Media | Medio |
| Auto-sugerencias de traducci√≥n | Baja | Medio |
| Soporte m√°s idiomas | Baja | Alto |

### Testing

| Tarea | Prioridad | Esfuerzo |
|-------|-----------|----------|
| Setup Playwright | Alta | Medio |
| Tests e2e cr√≠ticos | Alta | Alto |
| Tests unitarios composables | Media | Medio |

---

## 8. Calendario Tentativo

```
Semana 1-2:   Fase 1A (VersionList, RevisionsTable, PreviewModal)
Semana 3-4:   Fase 1B (UserTable, RoleForm, useTableSelection)
Semana 5-6:   Fase 1B (BulkActionsBar, StatusBadge, cleanup)
Semana 7-8:   Fase 2 (requestId, m√©tricas b√°sicas)
Semana 9-10:  Fase 2 (dashboard m√©tricas, optimizaciones)
Semana 11+:   Fase 3 (Effect System 2.0, dashboard i18n)
```

---

## 9. Reglas de Ejecuci√≥n

### 9.1 Antes de Cada Tarea

- [ ] Revisar documentaci√≥n relacionada
- [ ] Verificar dependencias completadas
- [ ] Consultar CodeMaps y MCPs

### 9.2 Durante la Implementaci√≥n

- [ ] Seguir patrones existentes
- [ ] No crear componentes fuera de estructura
- [ ] Documentar decisiones en c√≥digo

### 9.3 Antes de Completar

- [ ] Ejecutar checklist QA manual
- [ ] Actualizar documentaci√≥n afectada
- [ ] Regenerar informes si aplica

---

## 10. Checklist QA por Fase

### Fase 1

- [ ] CRUD funciona en todas las tablas migradas
- [ ] Bulk actions seleccionan/deseleccionan correctamente
- [ ] Preview drawer abre/cierra sin errores
- [ ] Filtros y paginaci√≥n funcionan
- [ ] No hay errores en consola
- [ ] SSR funciona correctamente

### Fase 2

- [ ] requestId aparece en logs
- [ ] M√©tricas se exportan correctamente
- [ ] Dashboard muestra datos reales
- [ ] No hay degradaci√≥n de performance

### Fase 3

- [ ] Editor de efectos guarda correctamente
- [ ] Preview de efectos es preciso
- [ ] Dashboard i18n muestra cobertura real
- [ ] Storybook renderiza componentes

---

## 11. Riesgos y Mitigaciones

| Riesgo | Probabilidad | Impacto | Mitigaci√≥n |
|--------|--------------|---------|------------|
| Regresiones en tablas | Media | Alto | Tests manuales exhaustivos |
| M√©tricas impactan performance | Baja | Medio | Sampling configurable |
| Effect System complejo | Alta | Medio | Prototipo iterativo |
| Falta de tiempo | Media | Alto | Priorizar alta impacto |

---

## 12. Uso del Roadmap

### Para Desarrolladores

1. Consultar este documento antes de iniciar trabajo
2. Verificar en qu√© fase est√° la tarea
3. Revisar dependencias y criterios de aceptaci√≥n
4. Actualizar estado al completar

### Para Coordinaci√≥n

1. Revisar progreso semanal
2. Ajustar prioridades seg√∫n necesidades
3. Comunicar cambios en el roadmap
4. Mantener documentaci√≥n actualizada

---

*Este roadmap es un documento vivo que debe actualizarse conforme avanza el proyecto.*
